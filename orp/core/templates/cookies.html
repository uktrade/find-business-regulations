{% extends "base.html" %}

{% block head_title %}{{service_name}}{% endblock %}
{% block service_name %}{{service_name}}{% endblock %}

{% block body_content %}
<div class="govuk-width-container">
    <main class="govuk-main-wrapper govuk-main-wrapper--l" id="main-content" role="main">
        {% if analytics_cookie_name in request.GET %}
        <div class="govuk-notification-banner govuk-notification-banner--success" role="alert"
            aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header">
                <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                    Success
                </h2>
            </div>
            <div class="govuk-notification-banner__content">
                <p class="govuk-notification-banner__heading">
                    You've set your cookie preferences.
                </p>
            </div>
        </div>
        {% endif %}
        <div class="govuk-grid-row govuk-!-margin-bottom-4">
            <div class="govuk-grid-column-three-quarters">
                <h1 class="govuk-heading-xl">Cookies on the {{service_name}} service</h1>
            </div>
        </div>
        <div class="govuk-grid-row govuk-body">
            <div class="govuk-grid-column-three-quarters">
                <p>Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>
                <p>We use cookies to make {{service_name}} work and collect information
                    about how you use our service.</p>
                <p>Find out <a href="https://ico.org.uk/for-the-public/online/cookies" class="govuk-link">how to manage
                        cookies</a> from the Information Commissioner's Office.</p>

                <h2 class="govuk-heading-l">Essential cookies</h2>
                <p>Essential cookies keep your information secure while you use Check when large businesses pay their
                    suppliers. We do not need to ask permission to use them.</p>
                <table class="govuk-table app-cookies-table">
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header" scope="col">Name</th>
                            <th class="govuk-table__header" scope="col">Purpose</th>
                            <th class="govuk-table__header" scope="col">Expires</th>
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                {{analytics_cookie_name}}
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                Saves your analytics cookie consent settings
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                1 year
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                csrftoken
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                Helps prevent Cross-Site Request Forgery (CSRF) attacks
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                1 year
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                session
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                Used to keep you signed in when publishing a report
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                20 hours
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h2 class="govuk-heading-l">Analytics cookies (optional)</h2>
                <p class="govuk-body">
                    With your permission, we use Google Analytics to collect data about how you use Check when large
                    businesses pay their suppliers. This information helps us to improve our service.
                </p>
                <div class="govuk-inset-text">
                    Google is not allowed to use or share our analytics data with anyone.
                </div>
                <p class="govuk-body">Google Analytics stores anonymised information about:</p>
                <ul class="govuk-list govuk-list--bullet">
                    <li>how you got to {{service_name}}</li>
                    <li>the pages you visit on {{service_name}} and how long you spend on
                        them</li>
                    <li>any errors you see while using {{service_name}}</li>
                </ul>
                <p class="govuk-body">Google Analytics sets the following cookies:</p>
                <table class="govuk-table app-cookies-table">
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header" scope="col">Name</th>
                            <th class="govuk-table__header" scope="col">Purpose</th>
                            <th class="govuk-table__header" scope="col">Expires</th>
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                _ga
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                This helps us count how many people visit this site by tracking if you've visited before
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                2 years
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                _gid
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                This helps us count how many people visit this site by tracking if you've visited before
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                1 day
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header govuk-!-width-one-quarter app-!-vertical-align-top"
                                scope="row">
                                _gat
                            </th>
                            <td class="govuk-table__cell app-!-vertical-align-top">
                                Used to manage the rate at which page view requests are made
                            </td>
                            <td class="govuk-table__cell app-!-vertical-align-top govuk-!-width-one-quarter">
                                1 minute
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h2 class="govuk-heading-l">Change your cookie settings</h2>
                <form method="post" novalidate>
                    {% csrf_token %}
                    <div class="govuk-form-group">
                        <fieldset class="govuk-fieldset">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                                {{ form.analytics_consent.label }}
                            </legend>
                            <div class="govuk-radios" data-module="govuk-radios">
                                {% for value, text in form.analytics_consent.field.choices %}
                                <div class="govuk-radios__item">
                                    <input class="govuk-radios__input" id="analytics-consent-{{ value }}"
                                        name="{{ form.analytics_consent.name }}" type="radio" value="{{ value }}"
                                        {% if form.analytics_consent.value == value %}checked{% endif %}>
                                    <label class="govuk-label govuk-radios__label" for="analytics-consent-{{ value }}">
                                        {{ text }}
                                    </label>
                                </div>
                                {% endfor %}
                            </div>
                        </fieldset>
                    </div>
                    <button type="submit" class="govuk-button" data-module="govuk-button">
                        Save cookie settings
                    </button>
                </form>
            </div>
        </div>
    </main>
</div>
{% endblock %}
